<script>
async function send() {
  const input = document.getElementById("msg");
  const out = document.getElementById("out");
  const text = input.value.trim();
  if (!text) return;

  out.innerText += `You: ${text}\n`;
  out.innerText += `Saathi AI: thinking...\n`;

  try {
    const res = await fetch("https://saathi-ai.aunikkori.workers.dev", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ message: text })
    });

    const data = await res.json();

    if (data.reply) {
      out.innerText += `Saathi AI: ${data.reply}\n\n`;
    } else {
      out.innerText += `Saathi AI: No reply field found\n\n`;
    }

  } catch (e) {
    out.innerText += `Saathi AI: Error connecting to server\n\n`;
  }

  input.value = "";
}
</script>
