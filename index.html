<script>
async function send() {
  const input = document.getElementById("input");
  const out = document.getElementById("output");
  const text = input.value.trim();
  if (!text) return;

  out.innerText += `You: ${text}\n`;
  out.innerText += `Saathi AI: thinking...\n`;
  input.value = "";

  try {
    const res = await fetch("https://saathi-ai.aunikkori.workers.dev", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ message: text })
    });

    const data = await res.json();

    if (data.reply) {
      out.innerText += `Saathi AI: ${data.reply}\n\n`;
    } else if (data.error) {
      out.innerText += `Saathi AI: ${data.error}\n\n`;
    } else {
      out.innerText += `Saathi AI: Empty response\n\n`;
    }

  } catch (e) {
    out.innerText += `Saathi AI: Network error\n\n`;
  }
}
</script>
